import{a as M,S as j}from"./assets/vendor-B_QiARH3.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const e of o)if(e.type==="childList")for(const i of e.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function r(o){const e={};return o.integrity&&(e.integrity=o.integrity),o.referrerPolicy&&(e.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?e.credentials="include":o.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function l(o){if(o.ep)return;o.ep=!0;const e=r(o);fetch(o.href,e)}})();document.addEventListener("DOMContentLoaded",function(){const n=document.querySelector(".burger-btn"),s=document.querySelector(".mobile-menu"),r=document.querySelector(".mobile-close"),l=document.querySelector(".mobile-backdrop"),o=document.querySelector(".header-logo-link");let e=!1;const i=()=>{l.classList.remove("open"),s.classList.remove("open"),document.body.style.overflow=""};n.addEventListener("click",()=>{if(l.classList.add("open"),s.classList.add("open"),document.body.style.overflow="hidden",!e&&o){const c=o.cloneNode(!0);c.classList.add("mobile-logo"),s.prepend(c),e=!0}}),r.addEventListener("click",i),l.addEventListener("click",c=>{c.target===l&&i()}),s.querySelectorAll("a").forEach(c=>{c.addEventListener("click",i)})});const N="https://sound-wave.b.goit.study/api";async function _(n=10,s=1){try{return(await M.get(`${N}/artists`,{params:{limit:n,page:s}})).data}catch(r){throw console.error("Error fetching artist list:",r),r}}async function W(n){try{return(await M.get(`${N}/artists/${n}`)).data}catch(s){throw console.error(`Error fetching artist details (ID: ${n}):`,s),s}}async function K(n=10,s=1){try{return(await M.get(`${N}/feedbacks`,{params:{limit:n,page:s}})).data}catch(r){throw console.error("Error fetching feedback list:",r),r}}const t=document.getElementById("artistModal"),$=t==null?void 0:t.querySelector(".close-modal"),y=document.getElementById("modalLoader"),v=t==null?void 0:t.querySelector("#modal-artist-image"),g=t==null?void 0:t.querySelector(".modal-title"),h=t==null?void 0:t.querySelector(".artist-info-list"),u=t==null?void 0:t.querySelector(".artist-info-bio-text"),m=t==null?void 0:t.querySelector("#read-more-bio-btn"),p=t==null?void 0:t.querySelector(".genres-list"),f=t==null?void 0:t.querySelector(".artist-albums-list"),F=t==null?void 0:t.querySelector(".artist-albums-block");let E=[],L=1;const T=8;function R(){g&&(g.textContent="Artist Name"),v&&(v.src="",v.alt=""),h&&(h.innerHTML=""),u&&(u.innerHTML=""),p&&(p.innerHTML=""),f&&(f.innerHTML=""),y&&(y.style.display="none");const n=t==null?void 0:t.querySelector(".pagination-controls");n&&n.remove(),m&&(m.style.display="none",m.textContent="Read More",u&&u.classList.remove("expanded"),m.removeEventListener("click",S)),E=[],L=1}function B(){t&&t.classList.remove("open"),document.body&&document.body.classList.remove("modal-open"),R(),document.removeEventListener("keydown",G),t==null||t.removeEventListener("click",Y)}function Y(n){n.target===t&&B()}function G(n){n.key==="Escape"&&B()}function I(n){if(!f)return;const s=(n-1)*T,r=s+T,l=E.slice(s,r);if(f.innerHTML="",l.length===0){f.innerHTML='<li class="artist-albums-item"><p>No album information available.</p></li>';const a=t==null?void 0:t.querySelector(".pagination-controls");a&&a.remove();return}l.forEach(a=>{let c=`<li class="artist-albums-item">
                            <h3>${a.strAlbum||"Album Title"} (${a.intYearReleased||"Year"})</h3>
                            <ul class="album-track-list">`;c+=`<li class="album-track-item track-header">
                            <ul class="track-info-list">
                                <li class="track-info-item">Track</li>
                                <li class="track-info-item track-info-item-time">Time</li>
                                <li class="track-info-item track-info-item-link">Link</li>
                            </ul>
                        </li>`,a.tracks&&a.tracks.length>0?a.tracks.forEach((d,b)=>{const x=b%2===0?"even-row":"odd-row";c+=`<li class="album-track-item ${x}">
                            <ul class="track-info-list">
                                <li class="track-info-item">${d.strTrack||"Track Name"}</li>
                                <li class="track-info-item track-info-item-time">${d.intDuration?z(d.intDuration):"-"}</li>
                                <li class="track-info-item track-info-item-link">`,d.movie&&typeof d.movie=="string"&&d.movie!=="null"&&(d.movie.startsWith("http://")||d.movie.startsWith("https://"))?c+=`<button class="yt-button" data-url="${d.movie}" aria-label="Watch on YouTube">
                                <svg class="yt-icon" width="20" height="20">
                                  <use href="./img/sprite.svg#icon-youtube"></use>
                                </svg>
                            </button>`:c+="-",c+=`</li>
                            </ul>
                        </li>`}):c+='<li class="album-track-item"><p>No tracks available for this album.</p></li>',c+="</ul></li>",f.insertAdjacentHTML("beforeend",c)});const o=Math.ceil(E.length/T),e=t==null?void 0:t.querySelector(".pagination-controls");if(e&&e.remove(),o>1){const a=document.createElement("div");a.className="pagination-controls";const c=document.createElement("button");c.textContent="Previous",c.disabled=n===1,c.addEventListener("click",()=>{L--,I(L)});const d=document.createElement("button");d.textContent="Next",d.disabled=n===o,d.addEventListener("click",()=>{L++,I(L)});const b=document.createElement("span");b.textContent=` ${n} / ${o} `,a.appendChild(c),a.appendChild(b),a.appendChild(d),F?F.appendChild(a):t&&t.appendChild(a)}const i=f==null?void 0:f.querySelectorAll(".yt-button");i==null||i.forEach(a=>{a.addEventListener("click",function(c){const d=c.currentTarget.dataset.url;d&&window.open(d,"_blank")})})}function z(n){const s=typeof n=="string"?parseInt(n,10):n;if(typeof s!="number"||isNaN(s)||s<0)return"N/A";const r=Math.floor(s/1e3),l=Math.floor(r/60),o=r%60;return`${l}:${o<10?"0":""}${o}`}function S(){u&&m&&(u.classList.toggle("expanded"),m.textContent=u.classList.contains("expanded")?"Read Less":"Read More")}async function J(n){if([t,y,g,v,h,u,p,f].some(e=>!e)){console.error("One or more modal DOM elements not found. Check your HTML IDs and classes.");return}document.body.classList.add("modal-open"),t.classList.add("open"),y.style.display="block",R(),document.addEventListener("keydown",G),t==null||t.addEventListener("click",Y),$==null||$.addEventListener("click",B);let r,l,o=[];if(typeof n=="object"&&n!==null?(l=n._id,Array.isArray(n.genres)&&n.genres.length>0?o=n.genres:typeof n.strGenre=="string"&&n.strGenre.trim()!==""&&(o=n.strGenre.split(";").map(e=>e.trim()).filter(e=>e!==""))):l=n,!l){console.error("Artist ID is missing for modal."),y.style.display="none",g&&(g.textContent="Error: Artist ID missing");return}try{r=await W(l);const e={...r};if(o.length>0?e.genres=o:e.genres=[],y.style.display="none",e){if(g.textContent=e.strArtist||"Unknown Artist",v.src=e.strArtistFanart||e.strArtistThumb||e.image||"https://via.placeholder.com/250x250.png?text=No+Image",v.alt=e.strArtist||"Artist Photo",h){const i=e.intFormedYear,a=e.intDiedYear;let c="information unavailable";i&&(a&&a!=="0000"&&a!==null?c=`${i} - ${a}`:c=`${i} - present`),h.innerHTML=`
          <li class="artist-info-item">
            <h3>Years Active</h3>
            <p class="artist-info">${c}</p>
          </li>
          <li class="artist-info-item">
            <h3>Gender</h3>
            <p class="artist-info">${e.strGender||"information unavailable"}</p>
          </li>
          <li class="artist-info-item">
            <h3>Members</h3>
            <p class="artist-info">${e.intMembers||"information unavailable"}</p>
          </li>
          <li class="artist-info-item">
            <h3>Country</h3>
            <p class="artist-info">${e.strCountry||"information unavailable"}</p>
          </li>
        `}if(u){const i=e.strBiographyEN||"Biography unavailable.";u.textContent=i,i.length>300?(u.classList.add("collapsed"),m&&(m.style.display="block",m.textContent="Read More",m.addEventListener("click",S))):(u.classList.remove("collapsed"),m&&(m.style.display="none",m.removeEventListener("click",S)))}if(p){p.innerHTML="";let i=e.genres||[];if(i.length>0)i.forEach(a=>{const c=document.createElement("li");c.className="genres-item",c.textContent=a,p.appendChild(c)});else{const a=document.createElement("li");a.className="genres-item",a.textContent="Genres unavailable",p.appendChild(a)}}if(e.tracksList&&e.tracksList.length>0){const i=new Map;e.tracksList.forEach(a=>{const c=a.strAlbum||"Unknown Album",d=a.idAlbum||c;i.has(d)||i.set(d,{strAlbum:c,intYearReleased:a.intYearReleased||"Unknown",idAlbum:d,tracks:[]}),i.get(d).tracks.push(a)}),E=Array.from(i.values()).sort((a,c)=>{const d=parseInt(a.intYearReleased)||0;return(parseInt(c.intYearReleased)||0)-d}),I(L)}else{f&&(f.innerHTML='<li class="artist-albums-item"><p>Album and track information unavailable.</p></li>');const i=t==null?void 0:t.querySelector(".pagination-controls");i&&i.remove()}}else g&&(g.textContent="Artist Not Found"),h&&(h.innerHTML='<li class="artist-info-item"><p>Could not retrieve artist details.</p></li>'),u&&(u.innerHTML=""),p&&(p.innerHTML=""),f&&(f.innerHTML="")}catch(e){if(y.style.display="none",t){g&&(g.textContent="Error loading data!");let i="Unfortunately, artist data could not be loaded. ";e.response?(i+=`Status: ${e.response.status}. `,e.response.status===404?i+="Resource not found at the specified URL. Incorrect ID or API path. Try a different ID or check API documentation.":e.response.data&&e.response.data.message&&(i+=`Message: ${e.response.data.message}`)):e.request?i+="No response received from the server. Network issue.":i+=`Message: ${e.message}`,h&&(h.innerHTML=`<li class="artist-info-item"><p class="error">${i}</p></li>`),u&&(u.innerHTML=""),p&&(p.innerHTML=""),f&&(f.innerHTML="")}console.error("Error fetching data:",e)}}const w=document.getElementById("artists-list"),A=document.getElementById("load-more"),k=document.getElementById("global-loader");let q=1;const P=8;let C=[],H=!1,O=new Map;async function D(n=1){Q(),H=!0;try{const s=await _(P,n),r=s.artists||[],l=s.totalArtists||0;r.forEach(e=>{C.push(e);const i=e._id||e.idArtist||e.id;i&&O.set(i,e)}),U(),document.querySelectorAll(".artist-card").length>=l&&C.length===0?A.classList.add("hidden"):A.classList.remove("hidden")}catch(s){console.error("Error fetching artists:",s),w&&(w.innerHTML='<li class="artist-card"><p>Failed to load artists. Please try again later.</p></li>'),A&&A.classList.add("hidden")}finally{V(),H=!1}}function U(){const n=C.splice(0,P),s=document.createDocumentFragment();n.forEach(r=>{var b;const l=document.createElement("li");l.classList.add("artist-card");const e=((b=(r.strBiographyEN||"").match(/^[^.!?]*[.!?]\s*/))==null?void 0:b[0])||"",i=e.length>140?e.slice(0,140)+"â€¦":e||"No biography available.",c=(Array.isArray(r.genres)&&r.genres.length>0?r.genres:[]).map(x=>`<span class="genre">${x}</span>`).join(" "),d=r._id||r.idArtist||r.id;l.innerHTML=`
      <img class="artists-img" src="${r.strArtistThumb||r.image||"https://via.placeholder.com/200x200?text=No+Image"}" alt="${r.strArtist||"Artist image"}">
      <p class="artist-genres">
        ${c||"No genres"}
      </p>
      <h3 class="artist-name">${r.strArtist||"Unknown Artist"}</h3>
      <p class="artist-description">${i}</p>
      <button class="learn-more-btn js-learn-more-btn"
              data-id="${d}">Learn More
        <svg class="load-icon" width="24" height="24"><use href="./img/sprite.svg#icon-caret-right"></use></svg>
      </button>
    `,s.appendChild(l)}),w&&w.appendChild(s),X()}A.addEventListener("click",()=>{C.length>=P?U():H||(q++,D(q))});function Q(){k&&(k.classList.add("is-active"),k.style.display="block")}function V(){k&&(k.classList.remove("is-active"),k.style.display="none")}function X(){document.querySelectorAll(".js-learn-more-btn").forEach(s=>{s.dataset.listenerAttached||(s.addEventListener("click",Z),s.dataset.listenerAttached="true")})}async function Z(n){const s=n.currentTarget.dataset.id;if(!s){console.warn("Artist ID not found for modal. Cannot open modal.");return}const r=O.get(s);try{await J(r||s)}catch(l){console.error("Error opening artist modal:",l)}}document.addEventListener("DOMContentLoaded",()=>{D(q)});const ee=document.querySelector(".swiper-wrapper");async function te(){try{(await K(10,1)).data.forEach(({rating:r,descr:l,name:o})=>{const e=ne({rating:r,text:l,user:o});ee.appendChild(e)}),re()}catch(n){console.error("Oops...Error",n)}}te();function ne({rating:n,text:s,user:r}){const l=document.createElement("div");l.classList.add("swiper-slide");const o=Math.round(n);return l.innerHTML=`
    <div class="feedback-card">
      <div class="feedback-stars">${se(o)}</div>
      <p class="feedback-text">"${s}"</p>
      <p class="feedback-user">${r}</p>
    </div>
  `,l}function se(n){let r="";for(let l=1;l<=5;l++){const o=l<=n?"star-filled":"star-outline";r+=`
        <svg class="star-icon ${o}" width="24" height="24">
          <use href="./img/sprite.svg#icon-star"></use>
        </svg>
      `}return r}function re(){const n=new j(".feedback-swiper",{loop:!1,navigation:{nextEl:".feedback-button-next",prevEl:".feedback-button-prev"},pagination:{el:".feedback-pagination",clickable:!0,type:"custom",renderCustom:function(s,r,l){const o=l-1;return[0,Math.floor(o/2),o].map(a=>`<span class="swiper-pagination-bullet ${r-1===a?"swiper-pagination-bullet-active":""}" data-slide-index="${a}"></span>`).join("")}},on:{paginationUpdate:function(){document.querySelectorAll(".feedback-pagination .swiper-pagination-bullet").forEach(r=>{r.onclick=()=>{const l=parseInt(r.getAttribute("data-slide-index"));n.slideTo(l)}})}},grabCursor:!0})}
//# sourceMappingURL=index.js.map
