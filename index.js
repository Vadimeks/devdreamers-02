import{a as I,S as O}from"./assets/vendor-B_QiARH3.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const e of o)if(e.type==="childList")for(const a of e.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const e={};return o.integrity&&(e.integrity=o.integrity),o.referrerPolicy&&(e.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?e.credentials="include":o.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function r(o){if(o.ep)return;o.ep=!0;const e=n(o);fetch(o.href,e)}})();document.addEventListener("DOMContentLoaded",function(){const s=document.querySelector(".burger-btn"),t=document.querySelector(".mobile-menu"),n=document.querySelector(".mobile-close"),r=document.querySelector(".mobile-backdrop"),o=document.querySelector(".header-logo-link");let e=!1;const a=()=>{r.classList.remove("open"),t.classList.remove("open"),document.body.style.overflow=""};s.addEventListener("click",()=>{if(r.classList.add("open"),t.classList.add("open"),document.body.style.overflow="hidden",!e&&o){const d=o.cloneNode(!0);d.classList.add("mobile-logo"),t.prepend(d),e=!0}}),n.addEventListener("click",a),r.addEventListener("click",d=>{d.target===r&&a()}),t.querySelectorAll("a").forEach(d=>{d.addEventListener("click",a)});const c=window.matchMedia("(min-width: 768px)"),f=d=>{d.matches&&r.classList.contains("open")&&a()};c.addEventListener("change",f),f(c)});const H="https://sound-wave.b.goit.study/api";async function _(s=10,t=1){try{return(await I.get(`${H}/artists`,{params:{limit:s,page:t}})).data}catch(n){throw console.error("Error fetching artist list:",n),n}}async function j(s){try{return(await I.get(`${H}/artists/${s}`)).data}catch(t){throw console.error(`Error fetching artist details (ID: ${s}):`,t),t}}async function D(s=10,t=1){try{return(await I.get(`${H}/feedbacks`,{params:{limit:s,page:t}})).data}catch(n){throw console.error("Error fetching feedback list:",n),n}}const i=document.getElementById("artistModal"),C=i==null?void 0:i.querySelector(".close-modal"),L=document.getElementById("modalLoader"),p=i==null?void 0:i.querySelector(".modal-content"),k=i==null?void 0:i.querySelector("#modal-artist-image"),h=i==null?void 0:i.querySelector(".modal-title"),b=i==null?void 0:i.querySelector(".artist-info-list"),u=i==null?void 0:i.querySelector(".artist-info-bio-text"),g=i==null?void 0:i.querySelector("#read-more-bio-btn"),y=i==null?void 0:i.querySelector(".genres-list"),m=i==null?void 0:i.querySelector(".artist-albums-list");i==null||i.querySelector(".artist-albums-block");const V="/script-ninjas-project";let E=[],T=0;function R(){h&&(h.textContent=""),k&&(k.src="",k.alt="Artist Photo"),b&&(b.innerHTML=""),u&&(u.innerHTML=""),y&&(y.innerHTML=""),m&&(m.innerHTML="");const s=i==null?void 0:i.querySelector(".pagination-controls");s&&s.remove(),g&&(g.style.display="none",g.textContent="Read More",u&&u.classList.remove("expanded"),g.removeEventListener("click",x)),E=[]}function q(){i&&i.classList.remove("open"),document.body&&(document.body.classList.remove("modal-open"),document.body.style.top="",window.scrollTo(0,T)),L&&(L.style.display="none"),p&&(p.style.opacity="0",p.style.visibility="hidden"),R(),document.removeEventListener("keydown",P),i==null||i.removeEventListener("click",Y)}function Y(s){s.target===i&&q()}function P(s){s.key==="Escape"&&q()}const K=s=>!s||typeof s!="string"||s.trim()===""?!1:/^(https?:\/\/)?(www\.)?(youtube\.com|youtu\.be)\/(watch\?v=|embed\/|v\/|)([\w-]{11})(.*)?$/.test(s.trim());function Q(){if(!m)return;if(m.innerHTML="",E.length===0){m.innerHTML='<li class="artist-albums-item"><p>No album information available.</p></li>';return}E.forEach(t=>{const n=t.strAlbum&&String(t.strAlbum).trim()!==""?t.strAlbum:"Album Title",r=t.intYearReleased&&String(t.intYearReleased).trim()!==""&&t.intYearReleased!=="0000"&&t.intYearReleased!==null?` (${t.intYearReleased})`:"";let o=`<li class="artist-albums-item">
                            <h3>${n}${r}</h3>
                            <ul class="album-track-list">`;o+=`<li class="album-track-item track-header">
                        <ul class="track-info-list">
                          <li class="track-info-item">Track</li>
                          <li class="track-info-item track-info-item-time">Time</li>
                          <li class="track-info-item track-info-item-link">Link</li>
                        </ul>
                      </li>`,t.tracks&&t.tracks.length>0?t.tracks.forEach((e,a)=>{const l=e.intDuration?W(e.intDuration):"",c=e.movie,d=K(c)?`<button class="yt-button" data-url="${c}" aria-label="Watch on YouTube">
                <svg class="yt-icon" width="20" height="14">
                    <use href="${V}/img/sprite.svg#icon-youtube-modal"></use>
                </svg>
            </button>`:"",w=e.strTrack&&String(e.strTrack).trim()!==""?e.strTrack:"Track Name";o+=`<li class="album-track-item">
                            <ul class="track-info-list">
                              <li class="track-info-item">${w}</li>
                              <li class="track-info-item track-info-item-time">${l}</li>
                              <li class="track-info-item track-info-item-link">${d}</li>
                            </ul>
                          </li>`}):o+='<li class="album-track-item"><p>No tracks available for this album.</p></li>',o+="</ul></li>",m.insertAdjacentHTML("beforeend",o)});const s=m==null?void 0:m.querySelectorAll(".yt-button");s==null||s.forEach(t=>{t.addEventListener("click",function(n){const r=n.currentTarget.dataset.url;r&&window.open(r,"_blank")})})}function W(s){const t=typeof s=="string"?parseInt(s,10):s;if(typeof t!="number"||isNaN(t)||t<=0)return"";const n=Math.floor(t/1e3),r=Math.floor(n/60),o=n%60;return`${r}:${o<10?"0":""}${o}`}function x(){u&&g&&(u.classList.toggle("expanded"),g.textContent=u.classList.contains("expanded")?"Read Less":"Read More")}async function z(s){if([i,L,p,h,k,b,u,y,m].some(e=>!e)){console.error("Missing modal DOM elements.");return}T=window.scrollY,document.body.style.top=`-${T}px`,document.body.classList.add("modal-open"),i.classList.add("open"),R(),L.style.display="flex",p.style.opacity="0",p.style.visibility="hidden",document.addEventListener("keydown",P),i==null||i.addEventListener("click",Y),C==null||C.addEventListener("click",q);let n,r,o=[];if(typeof s=="object"&&s!==null?(r=s._id,Array.isArray(s.genres)&&s.genres.length>0?o=s.genres:typeof s.strGenre=="string"&&String(s.strGenre).trim()!==""&&(o=s.strGenre.split(";").map(e=>e.trim()).filter(e=>e!==""))):r=s,!r){console.error("Artist ID missing."),L.style.display="none",h&&(h.textContent="Error: Artist ID missing"),p&&(p.style.opacity="1",p.style.visibility="visible");return}try{n=await j(r);const e={...n};if(o.length>0?e.genres=o:e.genres=[],e){if(h.textContent=e.strArtist&&String(e.strArtist).trim()!==""?e.strArtist:"",k.src=e.strArtistFanart||e.strArtistThumb||e.image||"",k.alt=e.strArtist||"Artist Photo",b){const a=e.intFormedYear,l=e.intDiedYear;let c="";a&&String(a).trim()!==""&&a!=="0000"&&a!==null&&(l&&String(l).trim()!==""&&l!=="0000"&&l!=="Present"&&l!==null?c=`${a} - ${l}`:c=`${a} - present`);const f=e.strGender&&String(e.strGender).trim()!==""&&String(e.strGender).trim().toLowerCase()!=="null"?e.strGender:"",d=e.intMembers&&String(e.intMembers).trim()!==""&&e.intMembers!=="0"&&e.intMembers!==null?e.intMembers:"",w=e.strCountry&&String(e.strCountry).trim()!==""&&String(e.strCountry).trim().toLowerCase()!=="null"?e.strCountry:"";b.innerHTML=`
          <li class="artist-info-item">
            <h3>Years Active</h3>
            <p class="artist-info">${c}</p>
          </li>
          <li class="artist-info-item">
            <h3>Gender</h3>
            <p class="artist-info">${f}</p>
          </li>
          <li class="artist-info-item">
            <h3>Members</h3>
            <p class="artist-info">${d}</p>
          </li>
          <li class="artist-info-item">
            <h3>Country</h3>
            <p class="artist-info">${w}</p>
          </li>
        `}if(u){const a=e.strBiographyEN&&String(e.strBiographyEN).trim()!==""&&String(e.strBiographyEN).trim().toLowerCase()!=="null"?e.strBiographyEN:"Biography unavailable.";u.textContent=a,a.length>300?(u.classList.add("collapsed"),g&&(g.style.display="block",g.textContent="Read More",g.addEventListener("click",x))):(u.classList.remove("collapsed"),g&&(g.style.display="none",g.removeEventListener("click",x)))}if(y){y.innerHTML="";let a=e.genres||[];if(a.length>0&&a.forEach(l=>{if(l&&String(l).trim()!==""&&String(l).trim().toLowerCase()!=="null"){const c=document.createElement("li");c.className="genres-item",c.textContent=l,y.appendChild(c)}}),y.children.length===0){const l=document.createElement("li");l.className="genres-item",l.textContent="Genres unavailable",y.appendChild(l)}}if(e.tracksList&&e.tracksList.length>0){const a=new Map;e.tracksList.forEach(l=>{const c=l.strAlbum||"Unknown Album",f=l.idAlbum||c;a.has(f)||a.set(f,{strAlbum:c,intYearReleased:l.intYearReleased||"",idAlbum:f,tracks:[]}),a.get(f).tracks.push(l)}),E=Array.from(a.values()).sort((l,c)=>{const f=parseInt(l.intYearReleased)||0;return(parseInt(c.intYearReleased)||0)-f}),Q()}else m&&(m.innerHTML='<li class="artist-albums-item"><p>Album and track information unavailable.</p></li>')}else h&&(h.textContent="Artist Not Found"),b&&(b.innerHTML='<li class="artist-info-item"><p>Could not retrieve artist details.</p></li>'),u&&(u.innerHTML=""),y&&(y.innerHTML=""),m&&(m.innerHTML="");L.style.display="none",p.style.opacity="1",p.style.visibility="visible"}catch(e){if(console.error("Error loading data:",e),L.style.display="none",p&&(p.style.opacity="1",p.style.visibility="visible"),i){h&&(h.textContent="Error loading data!");let a="Unfortunately, artist data could not be loaded. ";e.response?(a+=`Status: ${e.response.status}. `,e.response.status===404?a+="Resource not found or API path incorrect.":e.response.data&&e.response.data.message&&(a+=`Message: ${e.response.data.message}`)):e.request?a+="No response from server. Network issue.":a+=`Message: ${e.message}`,b&&(b.innerHTML=`<li class="artist-info-item"><p class="error">${a}</p></li>`),u&&(u.innerHTML=""),y&&(y.innerHTML=""),m&&(m.innerHTML="")}}}const S=document.getElementById("artists-list"),v=document.getElementById("load-more"),A=document.getElementById("global-loader");let M=1;const N=8;let $=[],B=!1,F=new Map;async function G(s=1){J(),B=!0;try{const t=await _(N,s),n=t.artists||[],r=t.totalArtists||0;n.forEach(e=>{$.push(e);const a=e._id||e.idArtist||e.id;a&&F.set(a,e)}),U(),document.querySelectorAll(".artist-card").length>=r&&$.length===0?v.classList.add("hidden"):v.classList.remove("hidden")}catch(t){console.error("Error fetching artists:",t),S&&(S.innerHTML='<li class="artist-card"><p>Failed to load artists. Please try again later.</p></li>'),v&&v.classList.add("hidden")}finally{X(),B=!1}}function U(){const s=$.splice(0,N),t=document.createDocumentFragment();s.forEach(n=>{var d;const r=document.createElement("li");r.classList.add("artist-card");const e=((d=(n.strBiographyEN||"").match(/^[^.!?]*[.!?]\s*/))==null?void 0:d[0])||"",a=e.length>140?e.slice(0,140)+"â€¦":e||"No biography available.",c=(Array.isArray(n.genres)&&n.genres.length>0?n.genres:[]).map(w=>`<span class="genre">${w}</span>`).join(" "),f=n._id||n.idArtist||n.id;r.innerHTML=`
      <div class="artists-image"><img class="artists-img" src="${n.strArtistThumb||n.image||"https://via.placeholder.com/200x200?text=No+Image"}" alt="${n.strArtist||"Artist image"}"></div>
      <p class="artist-genres">
        ${c||"No genres"}
      </p>
      <h3 class="artist-name">${n.strArtist||"Unknown Artist"}</h3>
      <p class="artist-description">${a}</p>

      <button class="learn-more-btn js-learn-more-btn"
              data-id="${f}">Learn More
        <svg class="load-icon" width="24" height="24"><use href="./img/sprite.svg#icon-caret-right"></use></svg>
      </button>

    `,t.appendChild(r)}),S&&S.appendChild(t),Z()}v.addEventListener("click",()=>{v.blur(),$.length>=N?U():B||(M++,G(M))});function J(){A&&(A.classList.add("is-active"),A.style.display="block")}function X(){A&&(A.classList.remove("is-active"),A.style.display="none")}function Z(){document.querySelectorAll(".js-learn-more-btn").forEach(t=>{t.dataset.listenerAttached||(t.addEventListener("click",ee),t.dataset.listenerAttached="true")})}async function ee(s){const t=s.currentTarget.dataset.id;if(!t){console.warn("Artist ID not found for modal. Cannot open modal.");return}const n=F.get(t);try{await z(n||t)}catch(r){console.error("Error opening artist modal:",r)}}document.addEventListener("DOMContentLoaded",()=>{G(M)});const te=document.querySelector(".swiper-wrapper");async function se(){try{(await D(10,1)).data.forEach(({rating:n,descr:r,name:o})=>{const e=ne({rating:n,text:r,user:o});te.appendChild(e)}),re()}catch(s){console.error("Oops...Error",s)}}se();function ne({rating:s,text:t,user:n}){const r=document.createElement("div");r.classList.add("swiper-slide");const o=Math.round(s);return r.innerHTML=`
    <div class="feedback-card">
      <div class="feedback-stars">${ie(o)}</div>
      <p class="feedback-text">"${t}"</p>
      <p class="feedback-user">${n}</p>
    </div>
  `,r}function ie(s){let n="";for(let r=1;r<=5;r++){const o=r<=s?"star-filled":"star-outline";n+=`
        <svg class="star-icon ${o}" width="24" height="24">
          <use href="./img/sprite.svg#icon-star"></use>
        </svg>
      `}return n}function re(){const s=new O(".feedback-swiper",{loop:!1,navigation:{nextEl:".feedback-button-next",prevEl:".feedback-button-prev"},pagination:{el:".feedback-pagination",clickable:!0,type:"custom",renderCustom:function(t,n,r){let o="",e="",a="";return n===1?o="swiper-pagination-bullet-active":n===r?a="swiper-pagination-bullet-active":e="swiper-pagination-bullet-active",`
          <span class="swiper-pagination-bullet ${o}" data-slide-index="0"></span>
          <span class="swiper-pagination-bullet ${e}" data-slide-index="${Math.floor((r-1)/2)}"></span>
          <span class="swiper-pagination-bullet ${a}" data-slide-index="${r-1}"></span>
        `}},on:{paginationUpdate:function(){document.querySelectorAll(".feedback-pagination .swiper-pagination-bullet").forEach(n=>{n.onclick=()=>{const r=parseInt(n.getAttribute("data-slide-index"));s.slideTo(r)}})}},grabCursor:!0})}
//# sourceMappingURL=index.js.map
