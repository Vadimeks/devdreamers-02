import{a as M,S as _}from"./assets/vendor-B_QiARH3.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const e of o)if(e.type==="childList")for(const i of e.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&c(i)}).observe(document,{childList:!0,subtree:!0});function r(o){const e={};return o.integrity&&(e.integrity=o.integrity),o.referrerPolicy&&(e.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?e.credentials="include":o.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function c(o){if(o.ep)return;o.ep=!0;const e=r(o);fetch(o.href,e)}})();document.addEventListener("DOMContentLoaded",function(){const n=document.querySelector(".burger-btn"),s=document.querySelector(".mobile-menu"),r=document.querySelector(".mobile-close"),c=document.querySelector(".mobile-backdrop"),o=document.querySelector(".header-logo-link");let e=!1;const i=()=>{c.classList.remove("open"),s.classList.remove("open"),document.body.style.overflow=""};n.addEventListener("click",()=>{if(c.classList.add("open"),s.classList.add("open"),document.body.style.overflow="hidden",!e&&o){const l=o.cloneNode(!0);l.classList.add("mobile-logo"),s.prepend(l),e=!0}}),r.addEventListener("click",i),c.addEventListener("click",l=>{l.target===c&&i()}),s.querySelectorAll("a").forEach(l=>{l.addEventListener("click",i)})});const N="https://sound-wave.b.goit.study/api";async function j(n=10,s=1){try{return(await M.get(`${N}/artists`,{params:{limit:n,page:s}})).data}catch(r){throw console.error("Error fetching artist list:",r),r}}async function W(n){try{return(await M.get(`${N}/artists/${n}`)).data}catch(s){throw console.error(`Error fetching artist details (ID: ${n}):`,s),s}}async function K(n=10,s=1){try{return(await M.get(`${N}/feedbacks`,{params:{limit:n,page:s}})).data}catch(r){throw console.error("Error fetching feedback list:",r),r}}const t=document.getElementById("artistModal"),$=t==null?void 0:t.querySelector(".close-modal"),b=document.getElementById("modalLoader"),v=t==null?void 0:t.querySelector("#modal-artist-image"),g=t==null?void 0:t.querySelector(".modal-title"),h=t==null?void 0:t.querySelector(".artist-info-list"),u=t==null?void 0:t.querySelector(".artist-info-bio-text"),m=t==null?void 0:t.querySelector("#read-more-bio-btn"),p=t==null?void 0:t.querySelector(".genres-list"),f=t==null?void 0:t.querySelector(".artist-albums-list"),F=t==null?void 0:t.querySelector(".artist-albums-block");let E=[],L=1;const x=8;function R(){g&&(g.textContent="Artist Name"),v&&(v.src="",v.alt=""),h&&(h.innerHTML=""),u&&(u.innerHTML=""),p&&(p.innerHTML=""),f&&(f.innerHTML=""),b&&(b.style.display="none");const n=t==null?void 0:t.querySelector(".pagination-controls");n&&n.remove(),m&&(m.style.display="none",m.textContent="Read More",u&&u.classList.remove("expanded"),m.removeEventListener("click",I)),E=[],L=1}function B(){t&&t.classList.remove("open"),document.body&&document.body.classList.remove("modal-open"),R(),document.removeEventListener("keydown",G),t==null||t.removeEventListener("click",Y)}function Y(n){n.target===t&&B()}function G(n){n.key==="Escape"&&B()}function S(n){if(!f)return;const s=(n-1)*x,r=s+x,c=E.slice(s,r);if(f.innerHTML="",c.length===0){f.innerHTML='<li class="artist-albums-item"><p>No album information available.</p></li>';const a=t==null?void 0:t.querySelector(".pagination-controls");a&&a.remove();return}c.forEach(a=>{let l=`<li class="artist-albums-item">
                            <h3>${a.strAlbum||"Album Title"} (${a.intYearReleased||"Year"})</h3>
                            <ul class="album-track-list">`;l+=`<li class="album-track-item track-header">
                            <ul class="track-info-list">
                                <li class="track-info-item">Track</li>
                                <li class="track-info-item track-info-item-time">Time</li>
                                <li class="track-info-item track-info-item-link">Link</li>
                            </ul>
                        </li>`,a.tracks&&a.tracks.length>0?a.tracks.forEach((d,y)=>{const T=y%2===0?"even-row":"odd-row";l+=`<li class="album-track-item ${T}">
                            <ul class="track-info-list">
                                <li class="track-info-item">${d.strTrack||"Track Name"}</li>
                                <li class="track-info-item track-info-item-time">${d.intDuration?z(d.intDuration):"-"}</li>
                                <li class="track-info-item track-info-item-link">`,d.movie&&typeof d.movie=="string"&&d.movie!=="null"&&(d.movie.startsWith("http://")||d.movie.startsWith("https://"))?l+=`<button class="yt-button" data-url="${d.movie}" aria-label="Watch on YouTube">
                                <svg class="yt-icon" width="20" height="20">
                                  <use href="./img/sprite.svg#icon-youtube"></use>
                                </svg>
                            </button>`:l+="-",l+=`</li>
                            </ul>
                        </li>`}):l+='<li class="album-track-item"><p>No tracks available for this album.</p></li>',l+="</ul></li>",f.insertAdjacentHTML("beforeend",l)});const o=Math.ceil(E.length/x),e=t==null?void 0:t.querySelector(".pagination-controls");if(e&&e.remove(),o>1){const a=document.createElement("div");a.className="pagination-controls";const l=document.createElement("button");l.textContent="Previous",l.disabled=n===1,l.addEventListener("click",()=>{L--,S(L)});const d=document.createElement("button");d.textContent="Next",d.disabled=n===o,d.addEventListener("click",()=>{L++,S(L)});const y=document.createElement("span");y.textContent=` ${n} / ${o} `,a.appendChild(l),a.appendChild(y),a.appendChild(d),F?F.appendChild(a):t&&t.appendChild(a)}const i=f==null?void 0:f.querySelectorAll(".yt-button");i==null||i.forEach(a=>{a.addEventListener("click",function(l){const d=l.currentTarget.dataset.url;d&&window.open(d,"_blank")})})}function z(n){const s=typeof n=="string"?parseInt(n,10):n;if(typeof s!="number"||isNaN(s)||s<0)return"N/A";const r=Math.floor(s/1e3),c=Math.floor(r/60),o=r%60;return`${c}:${o<10?"0":""}${o}`}function I(){u&&m&&(u.classList.toggle("expanded"),m.textContent=u.classList.contains("expanded")?"Read Less":"Read More")}async function J(n){if([t,b,g,v,h,u,p,f].some(e=>!e)){console.error("One or more modal DOM elements not found. Check your HTML IDs and classes.");return}document.body.classList.add("modal-open"),t.classList.add("open"),b.style.display="block",R(),document.addEventListener("keydown",G),t==null||t.addEventListener("click",Y),$==null||$.addEventListener("click",B);let r,c,o=[];if(typeof n=="object"&&n!==null?(c=n._id,Array.isArray(n.genres)&&n.genres.length>0?o=n.genres:typeof n.strGenre=="string"&&n.strGenre.trim()!==""&&(o=n.strGenre.split(";").map(e=>e.trim()).filter(e=>e!==""))):c=n,!c){console.error("Artist ID is missing for modal."),b.style.display="none",g&&(g.textContent="Error: Artist ID missing");return}try{r=await W(c);const e={...r};if(o.length>0?e.genres=o:e.genres=[],b.style.display="none",e){if(g.textContent=e.strArtist||"Unknown Artist",v.src=e.strArtistFanart||e.strArtistThumb||e.image||"https://via.placeholder.com/250x250.png?text=No+Image",v.alt=e.strArtist||"Artist Photo",h){const i=e.intFormedYear,a=e.intDiedYear;let l="information unavailable";i&&(a&&a!=="0000"&&a!==null?l=`${i} - ${a}`:l=`${i} - present`),h.innerHTML=`
          <li class="artist-info-item">
            <h3>Years Active</h3>
            <p class="artist-info">${l}</p>
          </li>
          <li class="artist-info-item">
            <h3>Gender</h3>
            <p class="artist-info">${e.strGender||"information unavailable"}</p>
          </li>
          <li class="artist-info-item">
            <h3>Members</h3>
            <p class="artist-info">${e.intMembers||"information unavailable"}</p>
          </li>
          <li class="artist-info-item">
            <h3>Country</h3>
            <p class="artist-info">${e.strCountry||"information unavailable"}</p>
          </li>
        `}if(u){const i=e.strBiographyEN||"Biography unavailable.";u.textContent=i,i.length>300?(u.classList.add("collapsed"),m&&(m.style.display="block",m.textContent="Read More",m.addEventListener("click",I))):(u.classList.remove("collapsed"),m&&(m.style.display="none",m.removeEventListener("click",I)))}if(p){p.innerHTML="";let i=e.genres||[];if(i.length>0)i.forEach(a=>{const l=document.createElement("li");l.className="genres-item",l.textContent=a,p.appendChild(l)});else{const a=document.createElement("li");a.className="genres-item",a.textContent="Genres unavailable",p.appendChild(a)}}if(e.tracksList&&e.tracksList.length>0){const i=new Map;e.tracksList.forEach(a=>{const l=a.strAlbum||"Unknown Album",d=a.idAlbum||l;i.has(d)||i.set(d,{strAlbum:l,intYearReleased:a.intYearReleased||"Unknown",idAlbum:d,tracks:[]}),i.get(d).tracks.push(a)}),E=Array.from(i.values()).sort((a,l)=>{const d=parseInt(a.intYearReleased)||0;return(parseInt(l.intYearReleased)||0)-d}),S(L)}else{f&&(f.innerHTML='<li class="artist-albums-item"><p>Album and track information unavailable.</p></li>');const i=t==null?void 0:t.querySelector(".pagination-controls");i&&i.remove()}}else g&&(g.textContent="Artist Not Found"),h&&(h.innerHTML='<li class="artist-info-item"><p>Could not retrieve artist details.</p></li>'),u&&(u.innerHTML=""),p&&(p.innerHTML=""),f&&(f.innerHTML="")}catch(e){if(b.style.display="none",t){g&&(g.textContent="Error loading data!");let i="Unfortunately, artist data could not be loaded. ";e.response?(i+=`Status: ${e.response.status}. `,e.response.status===404?i+="Resource not found at the specified URL. Incorrect ID or API path. Try a different ID or check API documentation.":e.response.data&&e.response.data.message&&(i+=`Message: ${e.response.data.message}`)):e.request?i+="No response received from the server. Network issue.":i+=`Message: ${e.message}`,h&&(h.innerHTML=`<li class="artist-info-item"><p class="error">${i}</p></li>`),u&&(u.innerHTML=""),p&&(p.innerHTML=""),f&&(f.innerHTML="")}console.error("Error fetching data:",e)}}const C=document.getElementById("artists-list"),A=document.getElementById("load-more"),k=document.getElementById("global-loader");let q=1;const P=8;let w=[],H=!1,O=new Map;async function D(n=1){Q(),H=!0;try{const s=await j(P,n),r=s.artists||[],c=s.totalArtists||0;r.forEach(e=>{w.push(e);const i=e._id||e.idArtist||e.id;i&&O.set(i,e)}),U(),document.querySelectorAll(".artist-card").length>=c&&w.length===0?A.classList.add("hidden"):A.classList.remove("hidden")}catch(s){console.error("Error fetching artists:",s),C&&(C.innerHTML='<li class="artist-card"><p>Failed to load artists. Please try again later.</p></li>'),A&&A.classList.add("hidden")}finally{V(),H=!1}}function U(){const n=w.splice(0,P),s=document.createDocumentFragment();n.forEach(r=>{var y;const c=document.createElement("li");c.classList.add("artist-card");const e=((y=(r.strBiographyEN||"").match(/^[^.!?]*[.!?]\s*/))==null?void 0:y[0])||"",i=e.length>140?e.slice(0,140)+"â€¦":e||"No biography available.",l=(Array.isArray(r.genres)&&r.genres.length>0?r.genres:[]).map(T=>`<span class="genre">${T}</span>`).join(" "),d=r._id||r.idArtist||r.id;c.innerHTML=`
      <img class="artists-img" src="${r.strArtistThumb||r.image||"https://via.placeholder.com/200x200?text=No+Image"}" alt="${r.strArtist||"Artist image"}">
      <p class="artist-genres">
        ${l||"No genres"}
      </p>
      <h3 class="artist-name">${r.strArtist||"Unknown Artist"}</h3>
      <p class="artist-description">${i}</p>
      <button class="learn-more-btn js-learn-more-btn"
              data-id="${d}">Learn More
        <svg class="load-icon" width="24" height="24"><use href="./img/sprite.svg#icon-caret-right"></use></svg>
      </button>
    `,s.appendChild(c)}),C&&C.appendChild(s),X()}A.addEventListener("click",()=>{w.length>=P?U():H||(q++,D(q))});function Q(){k&&(k.classList.add("is-active"),k.style.display="block")}function V(){k&&(k.classList.remove("is-active"),k.style.display="none")}function X(){document.querySelectorAll(".js-learn-more-btn").forEach(s=>{s.dataset.listenerAttached||(s.addEventListener("click",Z),s.dataset.listenerAttached="true")})}async function Z(n){const s=n.currentTarget.dataset.id;if(!s){console.warn("Artist ID not found for modal. Cannot open modal.");return}const r=O.get(s);try{await J(r||s)}catch(c){console.error("Error opening artist modal:",c)}}document.addEventListener("DOMContentLoaded",()=>{D(q)});const ee=document.querySelector(".swiper-wrapper");async function te(){try{(await K(10,1)).data.forEach(({rating:r,descr:c,name:o})=>{const e=ne({rating:r,text:c,user:o});ee.appendChild(e)}),re()}catch(n){console.error("Oops...Error",n)}}te();function ne({rating:n,text:s,user:r}){const c=document.createElement("div");c.classList.add("swiper-slide");const o=Math.round(n);return c.innerHTML=`
    <div class="feedback-card">
      <div class="feedback-stars">${se(o)}</div>
      <p class="feedback-text">"${s}"</p>
      <p class="feedback-user">${r}</p>
    </div>
  `,c}function se(n){let r="";for(let c=1;c<=5;c++){const o=c<=n?"star-filled":"star-outline";r+=`
        <svg class="star-icon ${o}" width="24" height="24">
          <use href="./img/sprite.svg#icon-star"></use>
        </svg>
      `}return r}function re(){new _(".feedback-swiper",{loop:!1,navigation:{nextEl:".feedback-button-next",prevEl:".feedback-button-prev"},pagination:{el:".feedback-pagination",clickable:!0},grabCursor:!0})}
//# sourceMappingURL=index.js.map
