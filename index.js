import{a as B,S as _}from"./assets/vendor-B_QiARH3.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const e of a)if(e.type==="childList")for(const r of e.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function s(a){const e={};return a.integrity&&(e.integrity=a.integrity),a.referrerPolicy&&(e.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?e.credentials="include":a.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function o(a){if(a.ep)return;a.ep=!0;const e=s(a);fetch(a.href,e)}})();document.addEventListener("DOMContentLoaded",function(){const n=document.querySelector(".burger-btn"),i=document.querySelector(".mobile-menu"),s=document.querySelector(".mobile-close"),o=document.querySelector(".mobile-backdrop"),a=document.querySelector(".header-logo-link");let e=!1;const r=()=>{o.classList.remove("open"),i.classList.remove("open"),document.body.style.overflow=""};n.addEventListener("click",()=>{if(o.classList.add("open"),i.classList.add("open"),document.body.style.overflow="hidden",!e&&a){const u=a.cloneNode(!0);u.classList.add("mobile-logo"),i.prepend(u),e=!0}}),s.addEventListener("click",r),o.addEventListener("click",u=>{u.target===o&&r()}),i.querySelectorAll("a").forEach(u=>{u.addEventListener("click",r)});const c=window.matchMedia("(min-width: 768px)"),d=u=>{u.matches&&o.classList.contains("open")&&r()};c.addEventListener("change",d),d(c)});const H="https://sound-wave.b.goit.study/api";async function j(n=10,i=1){try{return(await B.get(`${H}/artists`,{params:{limit:n,page:i}})).data}catch(s){throw console.error("Error fetching artist list:",s),s}}async function W(n){try{return(await B.get(`${H}/artists/${n}`)).data}catch(i){throw console.error(`Error fetching artist details (ID: ${n}):`,i),i}}async function K(n=10,i=1){try{return(await B.get(`${H}/feedbacks`,{params:{limit:n,page:i}})).data}catch(s){throw console.error("Error fetching feedback list:",s),s}}const t=document.getElementById("artistModal"),$=t==null?void 0:t.querySelector(".close-modal"),y=document.getElementById("modalLoader"),k=t==null?void 0:t.querySelector("#modal-artist-image"),h=t==null?void 0:t.querySelector(".modal-title"),b=t==null?void 0:t.querySelector(".artist-info-list"),f=t==null?void 0:t.querySelector(".artist-info-bio-text"),p=t==null?void 0:t.querySelector("#read-more-bio-btn"),g=t==null?void 0:t.querySelector(".genres-list"),m=t==null?void 0:t.querySelector(".artist-albums-list"),F=t==null?void 0:t.querySelector(".artist-albums-block");let E=[],v=1;const T=8;function R(){h&&(h.textContent="Artist Name"),k&&(k.src="",k.alt=""),b&&(b.innerHTML=""),f&&(f.innerHTML=""),g&&(g.innerHTML=""),m&&(m.innerHTML=""),y&&(y.style.display="none");const n=t==null?void 0:t.querySelector(".pagination-controls");n&&n.remove(),p&&(p.style.display="none",p.textContent="Read More",f&&f.classList.remove("expanded"),p.removeEventListener("click",I)),E=[],v=1}function N(){t&&t.classList.remove("open"),document.body&&document.body.classList.remove("modal-open"),R(),document.removeEventListener("keydown",G),t==null||t.removeEventListener("click",Y)}function Y(n){n.target===t&&N()}function G(n){n.key==="Escape"&&N()}function S(n){if(!m)return;const i=(n-1)*T,s=i+T,o=E.slice(i,s);if(m.innerHTML="",o.length===0){m.innerHTML='<li class="artist-albums-item"><p>No album information available.</p></li>';const l=t==null?void 0:t.querySelector(".pagination-controls");l&&l.remove();return}o.forEach(l=>{let c=`<li class="artist-albums-item">
                            <h3>${l.strAlbum||"Album Title"} (${l.intYearReleased||"Year"})</h3>
                            <ul class="album-track-list">`;c+=`<li class="album-track-item track-header">
                            <ul class="track-info-list">
                                <li class="track-info-item">Track</li>
                                <li class="track-info-item track-info-item-time">Time</li>
                                <li class="track-info-item track-info-item-link">Link</li>
                            </ul>
                        </li>`,l.tracks&&l.tracks.length>0?l.tracks.forEach((d,u)=>{const x=u%2===0?"even-row":"odd-row";c+=`<li class="album-track-item ${x}">
                            <ul class="track-info-list">
                                <li class="track-info-item">${d.strTrack||"Track Name"}</li>
                                <li class="track-info-item track-info-item-time">${d.intDuration?Q(d.intDuration):"-"}</li>
                                <li class="track-info-item track-info-item-link">`,d.movie&&typeof d.movie=="string"&&d.movie!=="null"&&(d.movie.startsWith("http://")||d.movie.startsWith("https://"))?c+=`<button class="yt-button" data-url="${d.movie}" aria-label="Watch on YouTube">
                                <svg class="yt-icon" width="20" height="20">
                                  <use href="./img/sprite.svg#icon-youtube"></use>
                                </svg>
                            </button>`:c+="-",c+=`</li>
                            </ul>
                        </li>`}):c+='<li class="album-track-item"><p>No tracks available for this album.</p></li>',c+="</ul></li>",m.insertAdjacentHTML("beforeend",c)});const a=Math.ceil(E.length/T),e=t==null?void 0:t.querySelector(".pagination-controls");if(e&&e.remove(),a>1){const l=document.createElement("div");l.className="pagination-controls";const c=document.createElement("button");c.textContent="Previous",c.disabled=n===1,c.addEventListener("click",()=>{v--,S(v)});const d=document.createElement("button");d.textContent="Next",d.disabled=n===a,d.addEventListener("click",()=>{v++,S(v)});const u=document.createElement("span");u.textContent=` ${n} / ${a} `,l.appendChild(c),l.appendChild(u),l.appendChild(d),F?F.appendChild(l):t&&t.appendChild(l)}const r=m==null?void 0:m.querySelectorAll(".yt-button");r==null||r.forEach(l=>{l.addEventListener("click",function(c){const d=c.currentTarget.dataset.url;d&&window.open(d,"_blank")})})}function Q(n){const i=typeof n=="string"?parseInt(n,10):n;if(typeof i!="number"||isNaN(i)||i<0)return"N/A";const s=Math.floor(i/1e3),o=Math.floor(s/60),a=s%60;return`${o}:${a<10?"0":""}${a}`}function I(){f&&p&&(f.classList.toggle("expanded"),p.textContent=f.classList.contains("expanded")?"Read Less":"Read More")}async function z(n){if([t,y,h,k,b,f,g,m].some(e=>!e)){console.error("One or more modal DOM elements not found. Check your HTML IDs and classes.");return}document.body.classList.add("modal-open"),t.classList.add("open"),y.style.display="block",R(),document.addEventListener("keydown",G),t==null||t.addEventListener("click",Y),$==null||$.addEventListener("click",N);let s,o,a=[];if(typeof n=="object"&&n!==null?(o=n._id,Array.isArray(n.genres)&&n.genres.length>0?a=n.genres:typeof n.strGenre=="string"&&n.strGenre.trim()!==""&&(a=n.strGenre.split(";").map(e=>e.trim()).filter(e=>e!==""))):o=n,!o){console.error("Artist ID is missing for modal."),y.style.display="none",h&&(h.textContent="Error: Artist ID missing");return}try{s=await W(o);const e={...s};if(a.length>0?e.genres=a:e.genres=[],y.style.display="none",e){if(h.textContent=e.strArtist||"Unknown Artist",k.src=e.strArtistFanart||e.strArtistThumb||e.image||"https://via.placeholder.com/250x250.png?text=No+Image",k.alt=e.strArtist||"Artist Photo",b){const r=e.intFormedYear,l=e.intDiedYear;let c="information unavailable";r&&(l&&l!=="0000"&&l!==null?c=`${r} - ${l}`:c=`${r} - present`),b.innerHTML=`
          <li class="artist-info-item">
            <h3>Years Active</h3>
            <p class="artist-info">${c}</p>
          </li>
          <li class="artist-info-item">
            <h3>Gender</h3>
            <p class="artist-info">${e.strGender||"information unavailable"}</p>
          </li>
          <li class="artist-info-item">
            <h3>Members</h3>
            <p class="artist-info">${e.intMembers||"information unavailable"}</p>
          </li>
          <li class="artist-info-item">
            <h3>Country</h3>
            <p class="artist-info">${e.strCountry||"information unavailable"}</p>
          </li>
        `}if(f){const r=e.strBiographyEN||"Biography unavailable.";f.textContent=r,r.length>300?(f.classList.add("collapsed"),p&&(p.style.display="block",p.textContent="Read More",p.addEventListener("click",I))):(f.classList.remove("collapsed"),p&&(p.style.display="none",p.removeEventListener("click",I)))}if(g){g.innerHTML="";let r=e.genres||[];if(r.length>0)r.forEach(l=>{const c=document.createElement("li");c.className="genres-item",c.textContent=l,g.appendChild(c)});else{const l=document.createElement("li");l.className="genres-item",l.textContent="Genres unavailable",g.appendChild(l)}}if(e.tracksList&&e.tracksList.length>0){const r=new Map;e.tracksList.forEach(l=>{const c=l.strAlbum||"Unknown Album",d=l.idAlbum||c;r.has(d)||r.set(d,{strAlbum:c,intYearReleased:l.intYearReleased||"Unknown",idAlbum:d,tracks:[]}),r.get(d).tracks.push(l)}),E=Array.from(r.values()).sort((l,c)=>{const d=parseInt(l.intYearReleased)||0;return(parseInt(c.intYearReleased)||0)-d}),S(v)}else{m&&(m.innerHTML='<li class="artist-albums-item"><p>Album and track information unavailable.</p></li>');const r=t==null?void 0:t.querySelector(".pagination-controls");r&&r.remove()}}else h&&(h.textContent="Artist Not Found"),b&&(b.innerHTML='<li class="artist-info-item"><p>Could not retrieve artist details.</p></li>'),f&&(f.innerHTML=""),g&&(g.innerHTML=""),m&&(m.innerHTML="")}catch(e){if(y.style.display="none",t){h&&(h.textContent="Error loading data!");let r="Unfortunately, artist data could not be loaded. ";e.response?(r+=`Status: ${e.response.status}. `,e.response.status===404?r+="Resource not found at the specified URL. Incorrect ID or API path. Try a different ID or check API documentation.":e.response.data&&e.response.data.message&&(r+=`Message: ${e.response.data.message}`)):e.request?r+="No response received from the server. Network issue.":r+=`Message: ${e.message}`,b&&(b.innerHTML=`<li class="artist-info-item"><p class="error">${r}</p></li>`),f&&(f.innerHTML=""),g&&(g.innerHTML=""),m&&(m.innerHTML="")}console.error("Error fetching data:",e)}}const w=document.getElementById("artists-list"),L=document.getElementById("load-more"),A=document.getElementById("global-loader");let M=1;const P=8;let C=[],q=!1,O=new Map;async function D(n=1){J(),q=!0;try{const i=await j(P,n),s=i.artists||[],o=i.totalArtists||0;s.forEach(e=>{C.push(e);const r=e._id||e.idArtist||e.id;r&&O.set(r,e)}),U(),document.querySelectorAll(".artist-card").length>=o&&C.length===0?L.classList.add("hidden"):L.classList.remove("hidden")}catch(i){console.error("Error fetching artists:",i),w&&(w.innerHTML='<li class="artist-card"><p>Failed to load artists. Please try again later.</p></li>'),L&&L.classList.add("hidden")}finally{V(),q=!1}}function U(){const n=C.splice(0,P),i=document.createDocumentFragment();n.forEach(s=>{var u;const o=document.createElement("li");o.classList.add("artist-card");const e=((u=(s.strBiographyEN||"").match(/^[^.!?]*[.!?]\s*/))==null?void 0:u[0])||"",r=e.length>140?e.slice(0,140)+"…":e||"No biography available.",c=(Array.isArray(s.genres)&&s.genres.length>0?s.genres:[]).map(x=>`<span class="genre">${x}</span>`).join(" "),d=s._id||s.idArtist||s.id;o.innerHTML=`
      <div class="artists-image"><img class="artists-img" src="${s.strArtistThumb||s.image||"https://via.placeholder.com/200x200?text=No+Image"}" alt="${s.strArtist||"Artist image"}"></div>
      <p class="artist-genres">
        ${c||"No genres"}
      </p>
      <h3 class="artist-name">${s.strArtist||"Unknown Artist"}</h3>
      <p class="artist-description">${r}</p>
      <a href="#" class="learn-more-btn js-learn-more-btn" data-id="${d}">
        Learn More
        <svg class="learn-icon" width="24" height="24">
          <use href="./img/sprite.svg#icon-caret-right"></use>
        </svg>
      </a>
    `,i.appendChild(o)}),w&&w.appendChild(i),X()}L.addEventListener("click",()=>{L.blur(),C.length>=P?U():q||(M++,D(M))});function J(){A&&(A.classList.add("is-active"),A.style.display="block")}function V(){A&&(A.classList.remove("is-active"),A.style.display="none")}function X(){document.querySelectorAll(".js-learn-more-btn").forEach(i=>{i.dataset.listenerAttached||(i.addEventListener("click",Z),i.dataset.listenerAttached="true")})}async function Z(n){const i=n.currentTarget.dataset.id;if(!i){console.warn("Artist ID not found for modal. Cannot open modal.");return}const s=O.get(i);try{await z(s||i)}catch(o){console.error("Error opening artist modal:",o)}}document.addEventListener("DOMContentLoaded",()=>{D(M)});const ee=document.querySelector(".swiper-wrapper");async function te(){try{(await K(10,1)).data.forEach(({rating:s,descr:o,name:a})=>{const e=ne({rating:s,text:o,user:a});ee.appendChild(e)}),ie()}catch(n){console.error("Oops...Error",n)}}te();function ne({rating:n,text:i,user:s}){const o=document.createElement("div");o.classList.add("swiper-slide");const a=Math.round(n);return o.innerHTML=`
    <div class="feedback-card">
      <div class="feedback-stars">${se(a)}</div>
      <p class="feedback-text">"${i}"</p>
      <p class="feedback-user">${s}</p>
    </div>
  `,o}function se(n){let s="";for(let o=1;o<=5;o++){const a=o<=n?"star-filled":"star-outline";s+=`
        <svg class="star-icon ${a}" width="24" height="24">
          <use href="./img/sprite.svg#icon-star"></use>
        </svg>
      `}return s}function ie(){const n=new _(".feedback-swiper",{loop:!1,navigation:{nextEl:".feedback-button-next",prevEl:".feedback-button-prev"},pagination:{el:".feedback-pagination",clickable:!0,type:"custom",renderCustom:function(i,s,o){let a="",e="",r="";return s===1?a="swiper-pagination-bullet-active":s===o?r="swiper-pagination-bullet-active":e="swiper-pagination-bullet-active",`
          <span class="swiper-pagination-bullet ${a}" data-slide-index="0"></span>
          <span class="swiper-pagination-bullet ${e}" data-slide-index="${Math.floor((o-1)/2)}"></span>
          <span class="swiper-pagination-bullet ${r}" data-slide-index="${o-1}"></span>
        `}},on:{paginationUpdate:function(){document.querySelectorAll(".feedback-pagination .swiper-pagination-bullet").forEach(s=>{s.onclick=()=>{const o=parseInt(s.getAttribute("data-slide-index"));n.slideTo(o)}})}},grabCursor:!0})}
//# sourceMappingURL=index.js.map
