import{a as H,S as _}from"./assets/vendor-B_QiARH3.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))o(c);new MutationObserver(c=>{for(const e of c)if(e.type==="childList")for(const r of e.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function s(c){const e={};return c.integrity&&(e.integrity=c.integrity),c.referrerPolicy&&(e.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?e.credentials="include":c.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function o(c){if(c.ep)return;c.ep=!0;const e=s(c);fetch(c.href,e)}})();document.addEventListener("DOMContentLoaded",function(){const n=document.querySelector(".burger-btn"),i=document.querySelector(".mobile-menu"),s=document.querySelector(".mobile-close"),o=document.querySelector(".mobile-backdrop"),c=document.querySelector(".header-logo-link");let e=!1;const r=()=>{o.classList.remove("open"),i.classList.remove("open"),document.body.style.overflow=""};n.addEventListener("click",()=>{if(o.classList.add("open"),i.classList.add("open"),document.body.style.overflow="hidden",!e&&c){const l=c.cloneNode(!0);l.classList.add("mobile-logo"),i.prepend(l),e=!0}}),s.addEventListener("click",r),o.addEventListener("click",l=>{l.target===o&&r()}),i.querySelectorAll("a").forEach(l=>{l.addEventListener("click",r)})});const M="https://sound-wave.b.goit.study/api";async function j(n=10,i=1){try{return(await H.get(`${M}/artists`,{params:{limit:n,page:i}})).data}catch(s){throw console.error("Error fetching artist list:",s),s}}async function W(n){try{return(await H.get(`${M}/artists/${n}`)).data}catch(i){throw console.error(`Error fetching artist details (ID: ${n}):`,i),i}}async function K(n=10,i=1){try{return(await H.get(`${M}/feedbacks`,{params:{limit:n,page:i}})).data}catch(s){throw console.error("Error fetching feedback list:",s),s}}const t=document.getElementById("artistModal"),$=t==null?void 0:t.querySelector(".close-modal"),y=document.getElementById("modalLoader"),k=t==null?void 0:t.querySelector("#modal-artist-image"),g=t==null?void 0:t.querySelector(".modal-title"),h=t==null?void 0:t.querySelector(".artist-info-list"),u=t==null?void 0:t.querySelector(".artist-info-bio-text"),m=t==null?void 0:t.querySelector("#read-more-bio-btn"),p=t==null?void 0:t.querySelector(".genres-list"),f=t==null?void 0:t.querySelector(".artist-albums-list"),F=t==null?void 0:t.querySelector(".artist-albums-block");let E=[],v=1;const T=8;function R(){g&&(g.textContent="Artist Name"),k&&(k.src="",k.alt=""),h&&(h.innerHTML=""),u&&(u.innerHTML=""),p&&(p.innerHTML=""),f&&(f.innerHTML=""),y&&(y.style.display="none");const n=t==null?void 0:t.querySelector(".pagination-controls");n&&n.remove(),m&&(m.style.display="none",m.textContent="Read More",u&&u.classList.remove("expanded"),m.removeEventListener("click",I)),E=[],v=1}function N(){t&&t.classList.remove("open"),document.body&&document.body.classList.remove("modal-open"),R(),document.removeEventListener("keydown",G),t==null||t.removeEventListener("click",Y)}function Y(n){n.target===t&&N()}function G(n){n.key==="Escape"&&N()}function S(n){if(!f)return;const i=(n-1)*T,s=i+T,o=E.slice(i,s);if(f.innerHTML="",o.length===0){f.innerHTML='<li class="artist-albums-item"><p>No album information available.</p></li>';const a=t==null?void 0:t.querySelector(".pagination-controls");a&&a.remove();return}o.forEach(a=>{let l=`<li class="artist-albums-item">
                            <h3>${a.strAlbum||"Album Title"} (${a.intYearReleased||"Year"})</h3>
                            <ul class="album-track-list">`;l+=`<li class="album-track-item track-header">
                            <ul class="track-info-list">
                                <li class="track-info-item">Track</li>
                                <li class="track-info-item track-info-item-time">Time</li>
                                <li class="track-info-item track-info-item-link">Link</li>
                            </ul>
                        </li>`,a.tracks&&a.tracks.length>0?a.tracks.forEach((d,b)=>{const x=b%2===0?"even-row":"odd-row";l+=`<li class="album-track-item ${x}">
                            <ul class="track-info-list">
                                <li class="track-info-item">${d.strTrack||"Track Name"}</li>
                                <li class="track-info-item track-info-item-time">${d.intDuration?z(d.intDuration):"-"}</li>
                                <li class="track-info-item track-info-item-link">`,d.movie&&typeof d.movie=="string"&&d.movie!=="null"&&(d.movie.startsWith("http://")||d.movie.startsWith("https://"))?l+=`<button class="yt-button" data-url="${d.movie}" aria-label="Watch on YouTube">
                                <svg class="yt-icon" width="20" height="20">
                                  <use href="./img/sprite.svg#icon-youtube"></use>
                                </svg>
                            </button>`:l+="-",l+=`</li>
                            </ul>
                        </li>`}):l+='<li class="album-track-item"><p>No tracks available for this album.</p></li>',l+="</ul></li>",f.insertAdjacentHTML("beforeend",l)});const c=Math.ceil(E.length/T),e=t==null?void 0:t.querySelector(".pagination-controls");if(e&&e.remove(),c>1){const a=document.createElement("div");a.className="pagination-controls";const l=document.createElement("button");l.textContent="Previous",l.disabled=n===1,l.addEventListener("click",()=>{v--,S(v)});const d=document.createElement("button");d.textContent="Next",d.disabled=n===c,d.addEventListener("click",()=>{v++,S(v)});const b=document.createElement("span");b.textContent=` ${n} / ${c} `,a.appendChild(l),a.appendChild(b),a.appendChild(d),F?F.appendChild(a):t&&t.appendChild(a)}const r=f==null?void 0:f.querySelectorAll(".yt-button");r==null||r.forEach(a=>{a.addEventListener("click",function(l){const d=l.currentTarget.dataset.url;d&&window.open(d,"_blank")})})}function z(n){const i=typeof n=="string"?parseInt(n,10):n;if(typeof i!="number"||isNaN(i)||i<0)return"N/A";const s=Math.floor(i/1e3),o=Math.floor(s/60),c=s%60;return`${o}:${c<10?"0":""}${c}`}function I(){u&&m&&(u.classList.toggle("expanded"),m.textContent=u.classList.contains("expanded")?"Read Less":"Read More")}async function J(n){if([t,y,g,k,h,u,p,f].some(e=>!e)){console.error("One or more modal DOM elements not found. Check your HTML IDs and classes.");return}document.body.classList.add("modal-open"),t.classList.add("open"),y.style.display="block",R(),document.addEventListener("keydown",G),t==null||t.addEventListener("click",Y),$==null||$.addEventListener("click",N);let s,o,c=[];if(typeof n=="object"&&n!==null?(o=n._id,Array.isArray(n.genres)&&n.genres.length>0?c=n.genres:typeof n.strGenre=="string"&&n.strGenre.trim()!==""&&(c=n.strGenre.split(";").map(e=>e.trim()).filter(e=>e!==""))):o=n,!o){console.error("Artist ID is missing for modal."),y.style.display="none",g&&(g.textContent="Error: Artist ID missing");return}try{s=await W(o);const e={...s};if(c.length>0?e.genres=c:e.genres=[],y.style.display="none",e){if(g.textContent=e.strArtist||"Unknown Artist",k.src=e.strArtistFanart||e.strArtistThumb||e.image||"https://via.placeholder.com/250x250.png?text=No+Image",k.alt=e.strArtist||"Artist Photo",h){const r=e.intFormedYear,a=e.intDiedYear;let l="information unavailable";r&&(a&&a!=="0000"&&a!==null?l=`${r} - ${a}`:l=`${r} - present`),h.innerHTML=`
          <li class="artist-info-item">
            <h3>Years Active</h3>
            <p class="artist-info">${l}</p>
          </li>
          <li class="artist-info-item">
            <h3>Gender</h3>
            <p class="artist-info">${e.strGender||"information unavailable"}</p>
          </li>
          <li class="artist-info-item">
            <h3>Members</h3>
            <p class="artist-info">${e.intMembers||"information unavailable"}</p>
          </li>
          <li class="artist-info-item">
            <h3>Country</h3>
            <p class="artist-info">${e.strCountry||"information unavailable"}</p>
          </li>
        `}if(u){const r=e.strBiographyEN||"Biography unavailable.";u.textContent=r,r.length>300?(u.classList.add("collapsed"),m&&(m.style.display="block",m.textContent="Read More",m.addEventListener("click",I))):(u.classList.remove("collapsed"),m&&(m.style.display="none",m.removeEventListener("click",I)))}if(p){p.innerHTML="";let r=e.genres||[];if(r.length>0)r.forEach(a=>{const l=document.createElement("li");l.className="genres-item",l.textContent=a,p.appendChild(l)});else{const a=document.createElement("li");a.className="genres-item",a.textContent="Genres unavailable",p.appendChild(a)}}if(e.tracksList&&e.tracksList.length>0){const r=new Map;e.tracksList.forEach(a=>{const l=a.strAlbum||"Unknown Album",d=a.idAlbum||l;r.has(d)||r.set(d,{strAlbum:l,intYearReleased:a.intYearReleased||"Unknown",idAlbum:d,tracks:[]}),r.get(d).tracks.push(a)}),E=Array.from(r.values()).sort((a,l)=>{const d=parseInt(a.intYearReleased)||0;return(parseInt(l.intYearReleased)||0)-d}),S(v)}else{f&&(f.innerHTML='<li class="artist-albums-item"><p>Album and track information unavailable.</p></li>');const r=t==null?void 0:t.querySelector(".pagination-controls");r&&r.remove()}}else g&&(g.textContent="Artist Not Found"),h&&(h.innerHTML='<li class="artist-info-item"><p>Could not retrieve artist details.</p></li>'),u&&(u.innerHTML=""),p&&(p.innerHTML=""),f&&(f.innerHTML="")}catch(e){if(y.style.display="none",t){g&&(g.textContent="Error loading data!");let r="Unfortunately, artist data could not be loaded. ";e.response?(r+=`Status: ${e.response.status}. `,e.response.status===404?r+="Resource not found at the specified URL. Incorrect ID or API path. Try a different ID or check API documentation.":e.response.data&&e.response.data.message&&(r+=`Message: ${e.response.data.message}`)):e.request?r+="No response received from the server. Network issue.":r+=`Message: ${e.message}`,h&&(h.innerHTML=`<li class="artist-info-item"><p class="error">${r}</p></li>`),u&&(u.innerHTML=""),p&&(p.innerHTML=""),f&&(f.innerHTML="")}console.error("Error fetching data:",e)}}const w=document.getElementById("artists-list"),L=document.getElementById("load-more"),A=document.getElementById("global-loader");let q=1;const P=8;let C=[],B=!1,O=new Map;async function D(n=1){Q(),B=!0;try{const i=await j(P,n),s=i.artists||[],o=i.totalArtists||0;s.forEach(e=>{C.push(e);const r=e._id||e.idArtist||e.id;r&&O.set(r,e)}),U(),document.querySelectorAll(".artist-card").length>=o&&C.length===0?L.classList.add("hidden"):L.classList.remove("hidden")}catch(i){console.error("Error fetching artists:",i),w&&(w.innerHTML='<li class="artist-card"><p>Failed to load artists. Please try again later.</p></li>'),L&&L.classList.add("hidden")}finally{V(),B=!1}}function U(){const n=C.splice(0,P),i=document.createDocumentFragment();n.forEach(s=>{var b;const o=document.createElement("li");o.classList.add("artist-card");const e=((b=(s.strBiographyEN||"").match(/^[^.!?]*[.!?]\s*/))==null?void 0:b[0])||"",r=e.length>140?e.slice(0,140)+"…":e||"No biography available.",l=(Array.isArray(s.genres)&&s.genres.length>0?s.genres:[]).map(x=>`<span class="genre">${x}</span>`).join(" "),d=s._id||s.idArtist||s.id;o.innerHTML=`
      <div class="artists-image"><img class="artists-img" src="${s.strArtistThumb||s.image||"https://via.placeholder.com/200x200?text=No+Image"}" alt="${s.strArtist||"Artist image"}"></div>
      <p class="artist-genres">
        ${l||"No genres"}
      </p>
      <h3 class="artist-name">${s.strArtist||"Unknown Artist"}</h3>
      <p class="artist-description">${r}</p>
      <a href="#" class="learn-more-btn js-learn-more-btn" data-id="${d}">
  Learn More
  <svg class="learn-icon" width="24" height="24">
    <use href="./img/sprite.svg#icon-caret-right"></use>
  </svg>
</a>
    `,i.appendChild(o)}),w&&w.appendChild(i),X()}L.addEventListener("click",()=>{L.blur(),C.length>=P?U():B||(q++,D(q))});function Q(){A&&(A.classList.add("is-active"),A.style.display="block")}function V(){A&&(A.classList.remove("is-active"),A.style.display="none")}function X(){document.querySelectorAll(".js-learn-more-btn").forEach(i=>{i.dataset.listenerAttached||(i.addEventListener("click",Z),i.dataset.listenerAttached="true")})}async function Z(n){const i=n.currentTarget.dataset.id;if(!i){console.warn("Artist ID not found for modal. Cannot open modal.");return}const s=O.get(i);try{await J(s||i)}catch(o){console.error("Error opening artist modal:",o)}}document.addEventListener("DOMContentLoaded",()=>{D(q)});const ee=document.querySelector(".swiper-wrapper");async function te(){try{(await K(10,1)).data.forEach(({rating:s,descr:o,name:c})=>{const e=ne({rating:s,text:o,user:c});ee.appendChild(e)}),ie()}catch(n){console.error("Oops...Error",n)}}te();function ne({rating:n,text:i,user:s}){const o=document.createElement("div");o.classList.add("swiper-slide");const c=Math.round(n);return o.innerHTML=`
    <div class="feedback-card">
      <div class="feedback-stars">${se(c)}</div>
      <p class="feedback-text">"${i}"</p>
      <p class="feedback-user">${s}</p>
    </div>
  `,o}function se(n){let s="";for(let o=1;o<=5;o++){const c=o<=n?"star-filled":"star-outline";s+=`
        <svg class="star-icon ${c}" width="24" height="24">
          <use href="./img/sprite.svg#icon-star"></use>
        </svg>
      `}return s}function ie(){const n=new _(".feedback-swiper",{loop:!1,navigation:{nextEl:".feedback-button-next",prevEl:".feedback-button-prev"},pagination:{el:".feedback-pagination",clickable:!0,type:"custom",renderCustom:function(i,s,o){const e=o;let r="",a="",l="";return s===1?r="swiper-pagination-bullet-active":s===e?l="swiper-pagination-bullet-active":a="swiper-pagination-bullet-active",`
          <span class="swiper-pagination-bullet ${r}" data-slide-index="0"></span>
          <span class="swiper-pagination-bullet ${a}" data-slide-index="${Math.floor(o/2)}"></span>
          <span class="swiper-pagination-bullet ${l}" data-slide-index="${o-1}"></span>
        `}},on:{paginationUpdate:function(){document.querySelectorAll(".feedback-pagination .swiper-pagination-bullet").forEach(s=>{s.onclick=()=>{const o=parseInt(s.getAttribute("data-slide-index"));n.slideTo(o)}})}},grabCursor:!0})}
//# sourceMappingURL=index.js.map
