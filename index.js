import{a as I,S as Z}from"./assets/vendor-BPI6-qR5.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const e of r)if(e.type==="childList")for(const a of e.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function s(r){const e={};return r.integrity&&(e.integrity=r.integrity),r.referrerPolicy&&(e.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?e.credentials="include":r.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function i(r){if(r.ep)return;r.ep=!0;const e=s(r);fetch(r.href,e)}})();document.addEventListener("DOMContentLoaded",function(){const n=document.querySelector(".burger-btn"),t=document.querySelector(".mobile-menu"),s=document.querySelector(".mobile-close"),i=document.querySelector(".mobile-backdrop"),r=document.querySelector(".header-logo-link");let e=!1;const a=()=>{i.classList.remove("open"),t.classList.remove("open"),document.body.style.overflow=""};n.addEventListener("click",()=>{if(i.classList.add("open"),t.classList.add("open"),document.body.style.overflow="hidden",!e&&r){const d=r.cloneNode(!0);d.classList.add("mobile-logo"),t.prepend(d),e=!0}}),s.addEventListener("click",a),i.addEventListener("click",d=>{d.target===i&&a()}),t.querySelectorAll("a").forEach(d=>{d.addEventListener("click",a)});const c=window.matchMedia("(min-width: 768px)"),f=d=>{d.matches&&i.classList.contains("open")&&a()};c.addEventListener("change",f),f(c)});const N="https://sound-wave.b.goit.study/api";async function ee(n=10,t=1){try{return(await I.get(`${N}/artists`,{params:{limit:n,page:t}})).data}catch(s){throw console.error("Error fetching artist list:",s),s}}async function te(n){try{return(await I.get(`${N}/artists/${n}`)).data}catch(t){throw console.error(`Error fetching artist details (ID: ${n}):`,t),t}}async function ne(n){try{return(await I.post(`${N}/feedbacks`,n)).data}catch(t){throw console.error("Error submitting feedback:",t),t}}async function se(n=10,t=1){try{return(await I.get(`${N}/feedbacks`,{params:{limit:n,page:t}})).data}catch(s){throw console.error("Error fetching feedback list:",s),s}}const o=document.getElementById("artistModal"),P=o==null?void 0:o.querySelector(".close-modal"),E=document.getElementById("modalLoader"),p=o==null?void 0:o.querySelector(".modal-content"),S=o==null?void 0:o.querySelector("#modal-artist-image"),b=o==null?void 0:o.querySelector(".modal-title"),L=o==null?void 0:o.querySelector(".artist-info-list"),u=o==null?void 0:o.querySelector(".artist-info-bio-text"),g=o==null?void 0:o.querySelector("#read-more-bio-btn"),y=o==null?void 0:o.querySelector(".genres-list"),m=o==null?void 0:o.querySelector(".artist-albums-list");o==null||o.querySelector(".artist-albums-block");const re="/script-ninjas-project";let q=[],F=0;function K(){b&&(b.textContent=""),S&&(S.src="",S.alt="Artist Photo"),L&&(L.innerHTML=""),u&&(u.innerHTML=""),y&&(y.innerHTML=""),m&&(m.innerHTML="");const n=o==null?void 0:o.querySelector(".pagination-controls");n&&n.remove(),g&&(g.style.display="none",g.textContent="Read More",u&&u.classList.remove("expanded"),g.removeEventListener("click",Y)),q=[]}function _(){o&&o.classList.remove("open"),document.body&&(document.body.classList.remove("modal-open"),document.body.style.top="",window.scrollTo(0,F)),E&&(E.style.display="none"),p&&(p.style.opacity="0",p.style.visibility="hidden"),K(),document.removeEventListener("keydown",W),o==null||o.removeEventListener("click",Q)}function Q(n){n.target===o&&_()}function W(n){n.key==="Escape"&&_()}const ie=n=>!n||typeof n!="string"||n.trim()===""?!1:/^(https?:\/\/)?(www\.)?(youtube\.com|youtu\.be)\/(watch\?v=|embed\/|v\/|)([\w-]{11})(.*)?$/.test(n.trim());function oe(){if(!m)return;if(m.innerHTML="",q.length===0){m.innerHTML='<li class="artist-albums-item"><p>No album information available.</p></li>';return}q.forEach(t=>{const s=t.strAlbum&&String(t.strAlbum).trim()!==""?t.strAlbum:"Album Title",i=t.intYearReleased&&String(t.intYearReleased).trim()!==""&&t.intYearReleased!=="0000"&&t.intYearReleased!==null?` (${t.intYearReleased})`:"";let r=`<li class="artist-albums-item">
                            <h3>${s}${i}</h3>
                            <ul class="album-track-list">`;r+=`<li class="album-track-item track-header">
                        <ul class="track-info-list">
                          <li class="track-info-item">Track</li>
                          <li class="track-info-item track-info-item-time">Time</li>
                          <li class="track-info-item track-info-item-link">Link</li>
                        </ul>
                      </li>`,t.tracks&&t.tracks.length>0?t.tracks.forEach((e,a)=>{const l=e.intDuration?ae(e.intDuration):"",c=e.movie,d=ie(c)?`<button class="yt-button" data-url="${c}" aria-label="Watch on YouTube">
                <svg class="yt-icon" width="20" height="14">
                    <use href="${re}/img/sprite.svg#icon-youtube-modal"></use>
                </svg>
            </button>`:"",$=e.strTrack&&String(e.strTrack).trim()!==""?e.strTrack:"Track Name";r+=`<li class="album-track-item">
                            <ul class="track-info-list">
                              <li class="track-info-item">${$}</li>
                              <li class="track-info-item track-info-item-time">${l}</li>
                              <li class="track-info-item track-info-item-link">${d}</li>
                            </ul>
                          </li>`}):r+='<li class="album-track-item"><p>No tracks available for this album.</p></li>',r+="</ul></li>",m.insertAdjacentHTML("beforeend",r)});const n=m==null?void 0:m.querySelectorAll(".yt-button");n==null||n.forEach(t=>{t.addEventListener("click",function(s){const i=s.currentTarget.dataset.url;i&&window.open(i,"_blank")})})}function ae(n){const t=typeof n=="string"?parseInt(n,10):n;if(typeof t!="number"||isNaN(t)||t<=0)return"";const s=Math.floor(t/1e3),i=Math.floor(s/60),r=s%60;return`${i}:${r<10?"0":""}${r}`}function Y(){u&&g&&(u.classList.toggle("expanded"),g.textContent=u.classList.contains("expanded")?"Read Less":"Read More")}async function le(n){if([o,E,p,b,S,L,u,y,m].some(e=>!e)){console.error("Missing modal DOM elements.");return}F=window.scrollY,document.body.style.top=`-${F}px`,document.body.classList.add("modal-open"),o.classList.add("open"),K(),E.style.display="flex",p.style.opacity="0",p.style.visibility="hidden",document.addEventListener("keydown",W),o==null||o.addEventListener("click",Q),P==null||P.addEventListener("click",_);let s,i,r=[];if(typeof n=="object"&&n!==null?(i=n._id,Array.isArray(n.genres)&&n.genres.length>0?r=n.genres:typeof n.strGenre=="string"&&String(n.strGenre).trim()!==""&&(r=n.strGenre.split(";").map(e=>e.trim()).filter(e=>e!==""))):i=n,!i){console.error("Artist ID missing."),E.style.display="none",b&&(b.textContent="Error: Artist ID missing"),p&&(p.style.opacity="1",p.style.visibility="visible");return}try{s=await te(i);const e={...s};if(r.length>0?e.genres=r:e.genres=[],e){if(b.textContent=e.strArtist&&String(e.strArtist).trim()!==""?e.strArtist:"",S.src=e.strArtistFanart||e.strArtistThumb||e.image||"",S.alt=e.strArtist||"Artist Photo",L){const a=e.intFormedYear,l=e.intDiedYear;let c="";a&&String(a).trim()!==""&&a!=="0000"&&a!==null&&(l&&String(l).trim()!==""&&l!=="0000"&&l!=="Present"&&l!==null?c=`${a} - ${l}`:c=`${a} - present`);const f=e.strGender&&String(e.strGender).trim()!==""&&String(e.strGender).trim().toLowerCase()!=="null"?e.strGender:"",d=e.intMembers&&String(e.intMembers).trim()!==""&&e.intMembers!=="0"&&e.intMembers!==null?e.intMembers:"",$=e.strCountry&&String(e.strCountry).trim()!==""&&String(e.strCountry).trim().toLowerCase()!=="null"?e.strCountry:"";L.innerHTML=`
          <li class="artist-info-item">
            <h3>Years Active</h3>
            <p class="artist-info">${c}</p>
          </li>
          <li class="artist-info-item">
            <h3>Gender</h3>
            <p class="artist-info">${f}</p>
          </li>
          <li class="artist-info-item">
            <h3>Members</h3>
            <p class="artist-info">${d}</p>
          </li>
          <li class="artist-info-item">
            <h3>Country</h3>
            <p class="artist-info">${$}</p>
          </li>
        `}if(u){const a=e.strBiographyEN&&String(e.strBiographyEN).trim()!==""&&String(e.strBiographyEN).trim().toLowerCase()!=="null"?e.strBiographyEN:"Biography unavailable.";u.textContent=a,a.length>300?(u.classList.add("collapsed"),g&&(g.style.display="block",g.textContent="Read More",g.addEventListener("click",Y))):(u.classList.remove("collapsed"),g&&(g.style.display="none",g.removeEventListener("click",Y)))}if(y){y.innerHTML="";let a=e.genres||[];if(a.length>0&&a.forEach(l=>{if(l&&String(l).trim()!==""&&String(l).trim().toLowerCase()!=="null"){const c=document.createElement("li");c.className="genres-item",c.textContent=l,y.appendChild(c)}}),y.children.length===0){const l=document.createElement("li");l.className="genres-item",l.textContent="Genres unavailable",y.appendChild(l)}}if(e.tracksList&&e.tracksList.length>0){const a=new Map;e.tracksList.forEach(l=>{const c=l.strAlbum||"Unknown Album",f=l.idAlbum||c;a.has(f)||a.set(f,{strAlbum:c,intYearReleased:l.intYearReleased||"",idAlbum:f,tracks:[]}),a.get(f).tracks.push(l)}),q=Array.from(a.values()).sort((l,c)=>{const f=parseInt(l.intYearReleased)||0;return(parseInt(c.intYearReleased)||0)-f}),oe()}else m&&(m.innerHTML='<li class="artist-albums-item"><p>Album and track information unavailable.</p></li>')}else b&&(b.textContent="Artist Not Found"),L&&(L.innerHTML='<li class="artist-info-item"><p>Could not retrieve artist details.</p></li>'),u&&(u.innerHTML=""),y&&(y.innerHTML=""),m&&(m.innerHTML="");E.style.display="none",p.style.opacity="1",p.style.visibility="visible"}catch(e){if(console.error("Error loading data:",e),E.style.display="none",p&&(p.style.opacity="1",p.style.visibility="visible"),o){b&&(b.textContent="Error loading data!");let a="Unfortunately, artist data could not be loaded. ";e.response?(a+=`Status: ${e.response.status}. `,e.response.status===404?a+="Resource not found or API path incorrect.":e.response.data&&e.response.data.message&&(a+=`Message: ${e.response.data.message}`)):e.request?a+="No response from server. Network issue.":a+=`Message: ${e.message}`,L&&(L.innerHTML=`<li class="artist-info-item"><p class="error">${a}</p></li>`),u&&(u.innerHTML=""),y&&(y.innerHTML=""),m&&(m.innerHTML="")}}}const B=document.getElementById("artists-list"),A=document.getElementById("load-more"),C=document.getElementById("global-loader");let G=1;const j=8;let H=[],O=!1,z=new Map;async function J(n=1){ce(),O=!0;try{const t=await ee(j,n),s=t.artists||[],i=t.totalArtists||0;s.forEach(e=>{H.push(e);const a=e._id||e.idArtist||e.id;a&&z.set(a,e)}),X(),document.querySelectorAll(".artist-card").length>=i&&H.length===0?A.classList.add("hidden"):A.classList.remove("hidden")}catch(t){console.error("Error fetching artists:",t),B&&(B.innerHTML='<li class="artist-card"><p>Failed to load artists. Please try again later.</p></li>'),A&&A.classList.add("hidden")}finally{de(),O=!1}}function X(){const n=H.splice(0,j),t=document.createDocumentFragment();n.forEach(s=>{var d;const i=document.createElement("li");i.classList.add("artist-card");const e=((d=(s.strBiographyEN||"").match(/^[^.!?]*[.!?]\s*/))==null?void 0:d[0])||"",a=e.length>140?e.slice(0,140)+"…":e||"No biography available.",c=(Array.isArray(s.genres)&&s.genres.length>0?s.genres:[]).map($=>`<span class="genre">${$}</span>`).join(" "),f=s._id||s.idArtist||s.id;i.innerHTML=`
      <div class="artists-image"><img class="artists-img" src="${s.strArtistThumb||s.image||"https://via.placeholder.com/200x200?text=No+Image"}" alt="${s.strArtist||"Artist image"}"></div>
      <p class="artist-genres">
        ${c||"No genres"}
      </p>
      <h3 class="artist-name">${s.strArtist||"Unknown Artist"}</h3>
      <p class="artist-description">${a}</p>

      <button class="learn-more-btn js-learn-more-btn"
              data-id="${f}">Learn More
        <svg class="load-icon" width="24" height="24"><use href="./img/sprite.svg#icon-caret-right"></use></svg>
      </button>

    `,t.appendChild(i)}),B&&B.appendChild(t),ue()}A.addEventListener("click",()=>{A.blur(),H.length>=j?X():O||(G++,J(G))});function ce(){C&&(C.classList.add("is-active"),C.style.display="block")}function de(){C&&(C.classList.remove("is-active"),C.style.display="none")}function ue(){document.querySelectorAll(".js-learn-more-btn").forEach(t=>{t.dataset.listenerAttached||(t.addEventListener("click",me),t.dataset.listenerAttached="true")})}async function me(n){const t=n.currentTarget.dataset.id;if(!t){console.warn("Artist ID not found for modal. Cannot open modal.");return}const s=z.get(t);try{await le(s||t)}catch(i){console.error("Error opening artist modal:",i)}}document.addEventListener("DOMContentLoaded",()=>{J(G)});let k,D,R,v,U,w,h=0;document.addEventListener("DOMContentLoaded",()=>{if(k=document.querySelector(".modal-overlay"),D=document.querySelector(".leave-feedback-modal"),R=document.querySelector(".modal-close"),v=document.querySelector(".feedback-form"),U=document.querySelectorAll(".star"),w=document.getElementById("feedback-loader"),!k||!D||!R||!v){console.warn("Modal elements not found for feedback modal.");return}U.forEach((n,t)=>{const s=t+1;n.addEventListener("mouseenter",()=>T(s)),n.addEventListener("mouseleave",()=>T(h)),n.addEventListener("click",()=>{h=s,T(h)})}),R.addEventListener("click",M),k.addEventListener("click",n=>{n.target===k&&M()}),document.addEventListener("keydown",n=>{n.key==="Escape"&&k.classList.contains("is-open")&&M()}),v.addEventListener("submit",async n=>{var i;n.preventDefault(),(i=document.querySelector(".feedback-error"))==null||i.remove();const t=v.elements.name.value.trim(),s=v.elements.message.value.trim();if(t.length<2||t.length>16){x("Name must be between 2 and 16 characters.");return}if(h<1||h>5){x("Please select a rating between 1 and 5.");return}if(s.length<10||s.length>512){x("Message must be between 10 and 512 characters.");return}pe();try{console.log("Submitting data:",{name:t,rating:h,message:s});const r=await ne({name:t,rating:h,descr:s});console.log("Feedback submitted successfully:",r),M(),v.reset(),h=0,T(0)}catch(r){x("Failed to submit feedback. Please try again later."),console.error("Error submitting feedback via apiService:",r)}finally{ge()}})});function fe(){var n;if(!k||!D){console.warn("Modal elements not initialized. Cannot open modal.");return}k.classList.add("is-open"),document.body.classList.add("modal-open"),v.reset(),h=0,T(0),(n=document.querySelector(".feedback-error"))==null||n.remove()}function M(){k.classList.remove("is-open"),document.body.classList.remove("modal-open")}function T(n){U.forEach((t,s)=>{t.classList.toggle("filled",s<n)})}function pe(){w==null||w.style.setProperty("display","block")}function ge(){w==null||w.style.setProperty("display","none")}function x(n){const t=document.querySelector(".feedback-error");t&&t.remove();const s=document.createElement("div");s.className="feedback-error",s.textContent=n,s.style.color="red",s.style.marginTop="8px",v.appendChild(s)}const ye=document.querySelector(".swiper-wrapper"),V=document.querySelector(".leave-feedback-button");async function be(){try{const t=(await se(10,1)).data;t&&t.length>0?(t.forEach(({rating:s,descr:i,name:r})=>{const e=he({rating:s,text:i,user:r});ye.appendChild(e)}),ve()):console.warn("No feedbacks received from the API.")}catch(n){console.error("Oops...Error loading feedbacks:",n)}}be();function he({rating:n,text:t,user:s}){const i=document.createElement("div");i.classList.add("swiper-slide");const r=Math.round(n);return i.innerHTML=`
    <div class="feedback-card">
      <div class="feedback-stars">${Le(r)}</div>
      <p class="feedback-text">"${t}"</p>
      <p class="feedback-user">${s}</p>
    </div>
  `,i}function Le(n){let s="";for(let i=1;i<=5;i++){const r=i<=n?"star-filled":"star-outline";s+=`
        <svg class="star-icon ${r}" width="24" height="24">
          <use href="./img/sprite.svg#icon-star"></use>
        </svg>
      `}return s}function ve(){new Z(".feedback-swiper",{loop:!1,navigation:{nextEl:".feedback-button-next",prevEl:".feedback-button-prev"},pagination:{el:".feedback-pagination",clickable:!0,type:"custom",renderCustom:function(t,s,i){const r=s===1?"swiper-pagination-bullet-active":"",e=s>1&&s<i?"swiper-pagination-bullet-active":"";return`
          <span class="swiper-pagination-bullet ${r}" data-slide-target="first-slide-go"></span>
          <span class="swiper-pagination-bullet ${e}" data-slide-target="indicator-only"></span>
          <span class="swiper-pagination-bullet ${s===i?"swiper-pagination-bullet-active":""}" data-slide-target="last-slide-go"></span>
        `}},on:{init:function(){n(this)},paginationRender:function(){n(this)}},grabCursor:!0});function n(t){const s=document.querySelector(".feedback-pagination");if(!s)return;s.removeEventListener("click",i),s.addEventListener("click",i);function i(r){const e=r.target.closest(".swiper-pagination-bullet");if(!e)return;const a=e.getAttribute("data-slide-target"),l=t.slides.length;if(a==="first-slide-go")t.slideTo(0);else if(a==="last-slide-go")t.slideTo(l-1);else if(a==="indicator-only")return}}}document.addEventListener("DOMContentLoaded",()=>{V?V.addEventListener("click",fe):console.warn("Leave feedback button not found.")});
//# sourceMappingURL=index.js.map
